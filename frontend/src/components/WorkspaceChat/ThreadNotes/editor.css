/* =========================================================
   BLOCKSUITE DARK THEME - OPERATION BLACKOUT
   Complete dark mode fix using official Affine CSS variables
   ========================================================= */

/* 
 * The container has data-theme="dark" which tells BlockSuite
 * to use dark mode. But we also need to ensure any rogue
 * elements respect our dark background.
 */

/* Force dark background on all BlockSuite containers */
.blocksuite-editor-wrapper,
.blocksuite-editor-wrapper affine-editor-container,
.blocksuite-editor-wrapper [data-block-is-root],
.blocksuite-editor-wrapper .affine-page-root,
.blocksuite-editor-wrapper .affine-page-viewport,
.blocksuite-editor-wrapper .affine-doc-viewport,
.blocksuite-editor-wrapper .affine-default-page-block-container,
.blocksuite-editor-wrapper .affine-surface-container {
  background: var(--affine-background-primary-color, #141414) !important;
  background-color: var(--affine-background-primary-color, #141414) !important;
}

/* Note block container */
.blocksuite-editor-wrapper .affine-note-block-container {
  background: var(--affine-background-primary-color, #141414) !important;
}

/* Ensure text is always light */
.blocksuite-editor-wrapper,
.blocksuite-editor-wrapper * {
  color: var(--affine-text-primary-color, #eaeaea);
}

.blocksuite-editor-wrapper [contenteditable="true"] {
  caret-color: var(--affine-text-primary-color, #eaeaea) !important;
}

/* Placeholder text */
.blocksuite-editor-wrapper [data-placeholder]::before,
.blocksuite-editor-wrapper .placeholder,
.blocksuite-editor-wrapper [placeholder]::before {
  color: var(--affine-placeholder-color, #3e3e3f) !important;
  opacity: 1 !important;
}

/* Selection highlight */
.blocksuite-editor-wrapper ::selection {
  background: rgba(30, 150, 235, 0.3) !important;
}

/* Borders */
.blocksuite-editor-wrapper hr,
.blocksuite-editor-wrapper .affine-divider,
.blocksuite-editor-wrapper .divider {
  border-color: var(--affine-border-color, #2e2e2e) !important;
  background-color: var(--affine-divider-color, #727272) !important;
}

/* Tables */
.blocksuite-editor-wrapper table,
.blocksuite-editor-wrapper td,
.blocksuite-editor-wrapper th {
  border-color: var(--affine-border-color, #2e2e2e) !important;
}

.blocksuite-editor-wrapper td,
.blocksuite-editor-wrapper th {
  background-color: var(--affine-background-secondary-color, #252525) !important;
}

/* Code blocks */
.blocksuite-editor-wrapper pre,
.blocksuite-editor-wrapper code,
.blocksuite-editor-wrapper .affine-code-block {
  background-color: var(--affine-background-code-block, #1f2022) !important;
  color: var(--affine-text-primary-color, #eaeaea) !important;
}

/* Blockquotes */
.blocksuite-editor-wrapper blockquote,
.blocksuite-editor-wrapper .affine-quote {
  border-left-color: var(--affine-quote-color, #8e8d91) !important;
  color: var(--affine-quote-color, #8e8d91) !important;
}

/* Links */
.blocksuite-editor-wrapper a {
  color: var(--affine-link-color, #78BEFF) !important;
}

/* Menus and popups - ensure they inherit dark mode */
.affine-slash-menu,
.affine-menu-container,
.affine-format-bar-widget,
.affine-toolbar,
.blocksuite-overlay {
  background-color: var(--affine-background-overlay-panel-color, #1e1e1e) !important;
  border-color: var(--affine-border-color, #2e2e2e) !important;
  box-shadow: var(--affine-menu-shadow) !important;
}

/* Menu items */
.affine-slash-menu-item,
.affine-menu-button,
.affine-menu-action,
.affine-toolbar-button {
  color: var(--affine-text-primary-color, #eaeaea) !important;
}

.affine-slash-menu-item:hover,
.affine-menu-button:hover,
.affine-menu-action:hover,
.affine-toolbar-button:hover {
  background-color: var(--affine-hover-color-filled, #2a2a2a) !important;
}

/* Database/Kanban views */
.blocksuite-editor-wrapper .affine-database-title,
.blocksuite-editor-wrapper .affine-kanban,
.blocksuite-editor-wrapper .affine-database {
  background-color: var(--affine-background-secondary-color, #252525) !important;
}

.blocksuite-editor-wrapper .affine-database-block-tag {
  background-color: var(--affine-tag-gray, #292929) !important;
}

/* Doc title */
.blocksuite-editor-wrapper .doc-title-container,
.blocksuite-editor-wrapper .doc-title {
  background: transparent !important;
  color: var(--affine-text-primary-color, #eaeaea) !important;
}

/* Icons */
.blocksuite-editor-wrapper svg {
  color: var(--affine-icon-color, #a8a8a0) !important;
  fill: currentColor;
}

/* Scrollbar - dark themed */
.blocksuite-editor-wrapper::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.blocksuite-editor-wrapper::-webkit-scrollbar-track {
  background: var(--affine-background-primary-color, #141414);
}

.blocksuite-editor-wrapper::-webkit-scrollbar-thumb {
  background: var(--affine-border-color, #2e2e2e);
  border-radius: 4px;
}

.blocksuite-editor-wrapper::-webkit-scrollbar-thumb:hover {
  background: var(--affine-hover-color-filled, #2a2a2a);
}

/* Tags */
.blocksuite-editor-wrapper .affine-tag-blue {
  background-color: rgba(8, 67, 136, 1) !important;
}

.blocksuite-editor-wrapper .affine-tag-green {
  background-color: rgba(44, 108, 63, 1) !important;
}

.blocksuite-editor-wrapper .affine-tag-teal {
  background-color: rgba(26, 115, 110, 1) !important;
}

.blocksuite-editor-wrapper .affine-tag-purple {
  background-color: rgba(47, 30, 113, 1) !important;
}

.blocksuite-editor-wrapper .affine-tag-red {
  background-color: rgba(111, 50, 50, 1) !important;
}

.blocksuite-editor-wrapper .affine-tag-yellow {
  background-color: rgba(150, 132, 49, 1) !important;
}

.blocksuite-editor-wrapper .affine-tag-orange {
  background-color: rgba(185, 129, 46, 1) !important;
}

.blocksuite-editor-wrapper .affine-tag-gray {
  background-color: rgba(41, 41, 41, 1) !important;
}

/* Ensure no white flash on load */
.blocksuite-editor-wrapper {
  background: #141414 !important;
}